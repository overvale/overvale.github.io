<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width = device-width" />
<link rel="stylesheet" type="text/css" href="/style.css" />
<title>Mark Line &amp; Marking Transient Command @overvale.com</title>
</head>
<body>
<main class="emacs">

<nav><a href="/">overvale.com</a></nav>

<h1>Mark Line &amp; Marking Transient Command</h1>

<time>2021, Summer</time>

<p>Emacs has a lot of commands for marking (selecting) things. You can find them all by typing <code>M-x mark-</code> and seeing the available options. You can also read about (most of) them in the <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Marking-Objects.html">manual</a>. They all work the same way, they leave the point where it is and extend the region (selection) forward by a given about (word, sentence, etc) by moving the “mark” (end of region).</p>
<p>One command that is missing (no idea why) is one for marking lines. Fortunately, the code for <code>mark-end-of-sentence</code> is really simple and easily adapted to mark lines.</p>
<pre class="elisp"><code>(defun mark-line (arg)
  &quot;Put mark at end of line.
ARG works as in `forward-line&#39;.  If this command is repeated,
it marks the next ARG lines after the ones already marked.&quot;
  (interactive &quot;p&quot;)
  (push-mark
   (save-excursion
     (if (and (eq last-command this-command) (mark t))
     (goto-char (mark)))
     (forward-line arg)
     (point))
   nil t))</code></pre>
<p>Additionally I have <code>mark-end-of-sentence</code> aliased to <code>mark-sentence</code> to be more consistent with the other mark commands.</p>
<p>I have also found it valuable to create a far more logical set of bindings for all these commands. I use the transient package for this, but you could set this up with a prefix binding or using another method you prefer.</p>
<pre class="elisp"><code>(transient-define-prefix general-transient--mark ()
  &quot;Transient for setting the mark.&quot;
  :transient-suffix &#39;transient--do-stay
  :transient-non-suffix &#39;transient--do-exit
  [&quot;Mark&quot;
   [(&quot;w&quot; &quot;Word&quot; mark-word)
    (&quot;s&quot; &quot;Sexp&quot; mark-sexp)
    (&quot;d&quot; &quot;Defun&quot; mark-defun)]
   [(&quot;n&quot; &quot;Line&quot; mark-line)
    (&quot;)&quot; &quot;Sentence&quot; mark-sentence)
    (&quot;}&quot; &quot;Paragraph&quot; mark-paragraph)]
   [(&quot;&lt;&quot; &quot;Beginning of Buffer&quot; mark-beginning-of-buffer)
    (&quot;&gt;&quot; &quot;End of Buffer&quot; mark-end-of-buffer)]
   [(&quot;x&quot; &quot;Exchange Point/Mark&quot; exchange-point-and-mark :transient nil)
    (&quot;q&quot; &quot;Quit&quot; transient-quit-all)]])</code></pre>

<footer>
</footer>

</main>
</body>
</html>
